# üéâ –§–∏–Ω–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è: –ü–æ–ª–Ω–æ—Å—Ç—å—é JSON —Å–∏—Å—Ç–µ–º–∞ –≤—Å—Ç—Ä–µ—á

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —Å–æ–≥–ª–∞—Å–Ω–æ –æ–±—Ä–∞—Ç–Ω–æ–π —Å–≤—è–∑–∏

### ‚ùå –ß—Ç–æ —É–±—Ä–∞–ª–∏ (–ª–∏—à–Ω–µ–µ):
- **title** - –Ω–∞–∑–≤–∞–Ω–∏–µ –≤—Å—Ç—Ä–µ—á–∏ –Ω–µ –Ω—É–∂–Ω–æ
- **satisfaction_rating** - –¥–æ–±–∞–≤–∏–º –ø–æ—Ç–æ–º 
- **–û—Ç–¥–µ–ª—å–Ω–æ–µ TEXT –ø–æ–ª–µ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫** - –≤—Å–µ –≤ JSON!
- **–û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π** - –≤—Å–µ –≤ JSON!
- **–û—Ç–¥–µ–ª—å–Ω–∞—è —Ç–∞–±–ª–∏—Ü–∞ –¥–ª—è –∑–∞–º–µ—Ç–æ–∫** - –≤—Å–µ –≤ JSON!

### ‚úÖ –ß—Ç–æ —Å–¥–µ–ª–∞–ª–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ:
- **–í—Å–µ –¥–∞–Ω–Ω—ã–µ –≤ JSON** - –∑–∞–º–µ—Ç–∫–∏ –∏ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- **–û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞** - –º–∞–∫—Å–∏–º–∞–ª—å–Ω–æ –ø—Ä–æ—Å—Ç–æ
- **–û–ø—Ç–∏–º–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - PostgreSQL JSONB –æ—á–µ–Ω—å –±—ã—Å—Ç—Ä—ã–π

## üìä –§–∏–Ω–∞–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –ë–î

```sql
CREATE TABLE meetings (
    id UUID PRIMARY KEY,
    employee_id UUID REFERENCES employees(id), -- –°–≤—è–∑—å —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º
    status meeting_status DEFAULT 'scheduled', -- –°—Ç–∞—Ç—É—Å –≤—Å—Ç—Ä–µ—á–∏
    
    -- –í—Ä–µ–º—è
    started_at TIMESTAMP WITH TIME ZONE,       -- –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞
    ended_at TIMESTAMP WITH TIME ZONE,         -- –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
    
    -- –í–°–Å –í JSON!
    content JSONB DEFAULT '{}',                -- –ó–∞–º–µ—Ç–∫–∏ + –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
    
    created_at TIMESTAMP WITH TIME ZONE,
    updated_at TIMESTAMP WITH TIME ZONE
);
```

## üóÇÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ JSON –¥–∞–Ω–Ω—ã—Ö

### –§–æ—Ä–º–∞—Ç –ø–æ–ª—è `content`:
```json
{
  "notes": "–î–ª–∏–Ω–Ω–∞—è –∑–∞–º–µ—Ç–∫–∞ –æ –≤—Å—Ç—Ä–µ—á–µ —Å —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–æ–º. –û–±—Å—É–¥–∏–ª–∏ —Ü–µ–ª–∏, –ø—Ä–æ–±–ª–µ–º—ã –∏ –ø–ª–∞–Ω—ã.",
  "agreements": [
    {
      "id": "agreement-1",
      "title": "–ò–∑—É—á–∏—Ç—å –Ω–æ–≤—É—é —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—é",
      "description": "–í—ã–¥–µ–ª–∏—Ç—å 2 —á–∞—Å–∞ –≤ –Ω–µ–¥–µ–ª—é –Ω–∞ –∏–∑—É—á–µ–Ω–∏–µ React",
      "type": "employee_task",
      "created_at": "2024-01-15T10:50:00Z"
    },
    {
      "id": "agreement-2",
      "title": "–ù–∞–π—Ç–∏ –º–µ–Ω—Ç–æ—Ä–∞",
      "description": "–°–≤—è–∑–∞—Ç—å—Å—è —Å senior —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏",
      "type": "manager_task", 
      "created_at": "2024-01-15T10:55:00Z"
    }
  ]
}
```

## üîÑ –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–∏—Å—Ç–µ–º–∞

### 1. **"–ù–∞—á–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É"**
```sql
-- –°–æ–∑–¥–∞–µ—Ç—Å—è –∑–∞–ø–∏—Å—å —Å –ø—É—Å—Ç—ã–º JSON
INSERT INTO meetings (employee_id, status, content) 
VALUES ('employee-uuid', 'active', '{}');
```

### 2. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫ –≤–æ –≤—Ä–µ–º—è –≤—Å—Ç—Ä–µ—á–∏**
```sql
-- –û–±–Ω–æ–≤–ª—è–µ—Ç—Å—è JSON –ø–æ–ª–µ
UPDATE meetings 
SET content = jsonb_set(content, '{notes}', '"–ó–∞–º–µ—Ç–∫–∞ –æ –≤—Å—Ç—Ä–µ—á–µ..."')
WHERE id = 'meeting-uuid';
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏**
```sql
-- –î–æ–±–∞–≤–ª—è–µ—Ç—Å—è —ç–ª–µ–º–µ–Ω—Ç –≤ –º–∞—Å—Å–∏–≤ agreements
UPDATE meetings 
SET content = jsonb_set(
  content, 
  '{agreements}', 
  COALESCE(content->'agreements', '[]') || '[{"id": "agreement-1", "title": "–ó–∞–¥–∞—á–∞"}]'
)
WHERE id = 'meeting-uuid';
```

### 4. **"–ó–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É"**
```sql
-- –£—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è –≤—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è + —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏
UPDATE meetings 
SET 
  status = 'completed',
  ended_at = NOW(),
  content = jsonb_set(content, '{notes}', '"–§–∏–Ω–∞–ª—å–Ω—ã–µ –∑–∞–º–µ—Ç–∫–∏ –≤—Å—Ç—Ä–µ—á–∏"')
WHERE id = 'meeting-uuid';
```

## üöÄ API Endpoints (—É–ø—Ä–æ—â–µ–Ω–Ω—ã–µ)

### –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏:
- `POST /api/meetings` - —Å–æ–∑–¥–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É
- `POST /api/meetings/:id/start` - **–Ω–∞—á–∞—Ç—å –≤—Å—Ç—Ä–µ—á—É**
- `POST /api/meetings/:id/end` - **–∑–∞–≤–µ—Ä—à–∏—Ç—å –≤—Å—Ç—Ä–µ—á—É** 
- `PUT /api/meetings/:id/notes` - –æ–±–Ω–æ–≤–∏—Ç—å –∑–∞–º–µ—Ç–∫–∏
- `POST /api/meetings/:id/agreements` - –¥–æ–±–∞–≤–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- `PUT /api/meetings/:id/agreements` - –∏–∑–º–µ–Ω–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å
- `DELETE /api/meetings/:id/agreements/:agreementId` - —É–¥–∞–ª–∏—Ç—å –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—å

### –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö:
- `GET /api/meetings` - —Å–ø–∏—Å–æ–∫ –≤—Å—Ç—Ä–µ—á
- `GET /api/meetings/:id` - –¥–µ—Ç–∞–ª—å–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞
- `GET /api/meetings/stats` - —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

## üí° –ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ JSON –ø–æ–¥—Ö–æ–¥–∞

### üî• **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å:**
- **–û–¥–∏–Ω SELECT** - –≤—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –≤—Å—Ç—Ä–µ—á–µ —Å—Ä–∞–∑—É
- **JSONB –∏–Ω–¥–µ–∫—Å—ã** - –±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç—è–º
- **–ê—Ç–æ–º–∞—Ä–Ω—ã–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è** - –≤—Å–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏
- **–ú–µ–Ω—å—à–µ JOIN –æ–ø–µ—Ä–∞—Ü–∏–π** - –¥–∞–Ω–Ω—ã–µ —É–∂–µ –∞–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω—ã

### üßπ **–ü—Ä–æ—Å—Ç–æ—Ç–∞:**
- **–û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞** - –ø—Ä–æ—â–µ –ø–æ–Ω–∏–º–∞—Ç—å –∏ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞—Ç—å
- **JSON –µ—Å—Ç–µ—Å—Ç–≤–µ–Ω–Ω–æ** –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞
- **–ì–∏–±–∫–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞** - –ª–µ–≥–∫–æ –¥–æ–±–∞–≤–ª—è—Ç—å –ø–æ–ª—è
- **–ú–µ–Ω—å—à–µ –∫–æ–¥–∞** –≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∏ –æ–±—Ä–∞–±–æ—Ç–∫–∏

### üìà **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ—Å—Ç—å:**
- **PostgreSQL JSONB** –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤
- **GIN –∏–Ω–¥–µ–∫—Å—ã** –¥–ª—è —Å–ª–æ–∂–Ω—ã—Ö –∑–∞–ø—Ä–æ—Å–æ–≤ –ø–æ JSON
- **Constraint –Ω–∞ 20 –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–µ–π** –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ—Ç –∑–ª–æ—É–ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏—è
- **–ù–µ—Ç –ª–∏–º–∏—Ç–æ–≤ –Ω–∞ —Ä–∞–∑–º–µ—Ä –∑–∞–º–µ—Ç–æ–∫**

## üéØ –ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### –§—Ä–æ–Ω—Ç–µ–Ω–¥ –ø–æ–ª—É—á–∞–µ—Ç –≤—Å—ë –æ–¥–Ω–∏–º –∑–∞–ø—Ä–æ—Å–æ–º:
```javascript
const meeting = await fetch('/api/meetings/meeting-id');
const data = await meeting.json();

// –í—Å—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è —Å—Ä–∞–∑—É –¥–æ—Å—Ç—É–ø–Ω–∞:
console.log(data.content.notes);        // –ó–∞–º–µ—Ç–∫–∏
console.log(data.content.agreements);   // –î–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
console.log(data.started_at);           // –í—Ä–µ–º—è –Ω–∞—á–∞–ª–∞  
console.log(data.ended_at);             // –í—Ä–µ–º—è –∑–∞–≤–µ—Ä—à–µ–Ω–∏—è
```

### –î–æ–±–∞–≤–ª–µ–Ω–∏–µ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏:
```javascript
await fetch('/api/meetings/meeting-id/agreements', {
  method: 'POST',
  body: JSON.stringify({
    title: "–ò–∑—É—á–∏—Ç—å TypeScript",
    description: "2 —á–∞—Å–∞ –≤ –Ω–µ–¥–µ–ª—é",
    type: "employee_task"
  })
});
```

### –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –∑–∞–º–µ—Ç–æ–∫:
```javascript
await fetch('/api/meetings/meeting-id/notes', {
  method: 'PUT',
  body: JSON.stringify({
    notes: "–°–æ—Ç—Ä—É–¥–Ω–∏–∫ –æ—á–µ–Ω—å –º–æ—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω. –û–±—Å—É–¥–∏–ª–∏ –ø–ª–∞–Ω —Ä–∞–∑–≤–∏—Ç–∏—è –∫–∞—Ä—å–µ—Ä—ã."
  })
});
```

## üîß –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ

### –ü—Ä–∏–º–µ–Ω–∏—Ç—å —Ñ–∏–Ω–∞–ª—å–Ω—É—é –º–∏–≥—Ä–∞—Ü–∏—é:
```bash
cd backend
npm run db:migrate:meetings-json
```

### –ó–∞–ø—É—Å—Ç–∏—Ç—å —Å–µ—Ä–≤–µ—Ä:
```bash
npm run dev
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å:
```bash
curl http://localhost:3001/api/health
```

## üìã –ò—Ç–æ–≥–æ–≤—ã–π –ø—Ä–∏–º–µ—Ä –∑–∞–ø–∏—Å–∏ –≤ –ë–î

```json
{
  "id": "meeting-uuid",
  "employee_id": "employee-uuid", 
  "status": "completed",
  "started_at": "2024-01-15T10:30:00Z",
  "ended_at": "2024-01-15T11:15:00Z",
  "content": {
    "notes": "–û—Ç–ª–∏—á–Ω–∞—è –≤—Å—Ç—Ä–µ—á–∞! –ò–≤–∞–Ω –ø–æ–¥–µ–ª–∏–ª—Å—è —Å–≤–æ–∏–º–∏ –∏–¥–µ—è–º–∏ –ø–æ —É–ª—É—á—à–µ–Ω–∏—é –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏. –û–±—Å—É–¥–∏–ª–∏ –ø–ª–∞–Ω –∫–∞—Ä—å–µ—Ä–Ω–æ–≥–æ —Ä–æ—Å—Ç–∞ –∏ –≤—ã—è—Å–Ω–∏–ª–∏, —á—Ç–æ –æ–Ω —Ö–æ—á–µ—Ç —Å—Ç–∞—Ç—å —Ç–∏–º–ª–∏–¥–æ–º.",
    "agreements": [
      {
        "id": "agreement-1",
        "title": "–ò–∑—É—á–∏—Ç—å –æ—Å–Ω–æ–≤—ã –º–µ–Ω–µ–¥–∂–º–µ–Ω—Ç–∞",
        "description": "–ü—Ä–æ—á–∏—Ç–∞—Ç—å –∫–Ω–∏–≥—É '–ú–∏—Ñ–∏—á–µ—Å–∫–∏–π —á–µ–ª–æ–≤–µ–∫–æ-–º–µ—Å—è—Ü'",
        "type": "employee_task",
        "created_at": "2024-01-15T10:50:00Z"
      },
      {
        "id": "agreement-2",
        "title": "–î–∞—Ç—å –±–æ–ª—å—à–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏ –≤ –ø—Ä–æ–µ–∫—Ç–µ", 
        "description": "–ù–∞–∑–Ω–∞—á–∏—Ç—å –ò–≤–∞–Ω–∞ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–º –∑–∞ –Ω–æ–≤—ã–π –º–æ–¥—É–ª—å",
        "type": "manager_task",
        "created_at": "2024-01-15T10:55:00Z"
      }
    ]
  }
}
```

## üéâ –ì–æ—Ç–æ–≤–æ!

‚úÖ **–í—Å–µ –∑–∞–º–µ—Ç–∫–∏ –≤ JSON** - –∫–∞–∫ –∏ –ø—Ä–æ—Å–∏–ª–∏  
‚úÖ **–í—Å–µ –¥–æ–≥–æ–≤–æ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ –≤ JSON** - –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ  
‚úÖ **–£–±—Ä–∞–ª–∏ –ª–∏—à–Ω–∏–µ –ø–æ–ª—è** - title, satisfaction_rating  
‚úÖ **–û–¥–Ω–∞ —Ç–∞–±–ª–∏—Ü–∞** - –ø—Ä–æ—Å—Ç–æ –∏ –ø–æ–Ω—è—Ç–Ω–æ  
‚úÖ **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** - PostgreSQL JSONB  
‚úÖ **–ì–æ—Ç–æ–≤–æ –∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏** —Å —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–æ–º  

–°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–ª–Ω–æ—Å—Ç—å—é —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º!
